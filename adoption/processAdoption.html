<?php
include '../db_connect.php'; // adjust path if necessary

// Query all animals that are available for adoption
$sql = "SELECT animalID, name, ward FROM Animals WHERE adoptionStatus != 'adopted'";
$result = $conn->query($sql);
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adoption Processing</title>
</head>
<body>

<h2>Animal Adoption Processing</h2>

<form action="../actions/process_adoption.php" method="POST">

    <!-- AdopterID -->
    <label for="adopterID">AdopterID:</label>
    <input type="text" id="adopterID" name="adopterID" placeholder="Enter adopter userID" required>
    <br><br>

    <!-- EmployeeID -->
    <label for="employeeID">EmployeeID:</label>
    <input type="text" id="employeeID" name="employeeID" placeholder="Enter employee userID" required>
    <br><br>

    <!-- Animal selection -->
    <label for="animalID">Animal:</label>
    <select id="animalID" name="animalID" required>
        <option value="">--Select an animal--</option>
        <?php
        if ($result->num_rows > 0) {
            while ($row = $result->fetch_assoc()) {
                echo '<option value="' . $row['animalID'] . '">'
                     . htmlspecialchars($row['name']) . ' - ' 
                     . htmlspecialchars($row['ward']) . '</option>';
            }
        } else {
            echo '<option value="">No animals available</option>';
        }
        ?>
    </select>
    <br><br>

    <!-- Request date -->
    <label for="requestDate">Adoption Processing Date:</label>
    <input type="date" id="requestDate" name="requestDate" required>
    <br><br>

    <button type="submit">Submit</button>

</form>

</body>
</html>
